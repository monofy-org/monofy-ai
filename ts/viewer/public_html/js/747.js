"use strict";(self.webpackChunkmonofy=self.webpackChunkmonofy||[]).push([[747],{5747:(e,i,n)=>{n.r(i),n.d(i,{Viewer:()=>E});var o=n(3582),t=n(7699),s=n(1513),a=n(9859),r=n(6041),l=n(2746),c=n(9923),d=n(5487),h=n(7698),m=n(6240),u=n(660),_=n(8844),b=n(9537),p=(n(6982),n(6547)),z=n(2285),g=window,E=function(){function e(e){var i=this;this._selectedMesh=null,this.cursorPosition=c.Pq.Zero(),void 0===e?(this._canvas=document.createElement("canvas"),document.body.appendChild(this._canvas)):this._canvas=e,this._canvas.width=g.innerWidth,this._canvas.height=g.innerHeight,g.addEventListener("resize",(function(){i._canvas.width=g.innerWidth,i._canvas.height=g.innerHeight})),this._engine=new t.N(this._canvas,!0),this._scene=new h.Z(this._engine),this._cursor=d.P.CreateSphere("cursor",{diameter:.1,segments:16},this._scene);var n=new a.F("cursorMaterial",this._scene);n.diffuseColor=new r.v9(0,1,0),n.specularColor=new r.v9(0,0,0),this._cursor.material=n,this._cursor.material.alpha=.5,this._cursor.isVisible=!1,this._defaultMaterial=new a.F("defaultMaterial",this._scene),this._defaultMaterial.diffuseColor=new r.v9(.8,.8,.8),this._defaultMaterial.specularColor=new r.v9(0,0,0),this._camera=new o.L("camera",0,0,10,c.Pq.Zero(),this._scene),this._camera.attachControl(this._canvas,!0),new s.g("light",new c.Pq(0,1,0),this._scene).intensity=.7,new l.H("pointLight",new c.Pq(0,10,0),this._scene).intensity=.7,this.gizmoManager=this._createGizmos(),this.ground=this._createGround(),this._engine.runRenderLoop((function(){i._scene.render()}))}return Object.defineProperty(e.prototype,"domElement",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),e.prototype._createGround=function(e,i){void 0===e&&(e=10),void 0===i&&(i=10),this.ground&&this.ground.dispose();var n=d.P.CreateGround("ground",{width:e,height:i},this._scene);return n.material=this._defaultMaterial,n},e.prototype._createGizmos=function(){var e=this;if(this.gizmoManager)throw new Error("Gizmo manager already created");g.addEventListener("keydown",(function(n){"Delete"===n.key?e._selectedMesh&&(i.attachToMesh(null),e._selectedMesh.dispose()):"e"===n.key?e._selectedMesh&&(i.rotationGizmoEnabled=!0,i.positionGizmoEnabled=!1,i.scaleGizmoEnabled=!1,i.boundingBoxGizmoEnabled=!1):"w"===n.key?e._selectedMesh&&(i.positionGizmoEnabled=!0,i.rotationGizmoEnabled=!1,i.scaleGizmoEnabled=!1,i.boundingBoxGizmoEnabled=!1):"q"===n.key?e._selectedMesh&&(i.positionGizmoEnabled=!0,i.rotationGizmoEnabled=!0,i.scaleGizmoEnabled=!1,i.boundingBoxGizmoEnabled=!1):"s"===n.key?e._selectedMesh&&(i.positionGizmoEnabled=!1,i.rotationGizmoEnabled=!1,i.scaleGizmoEnabled=!0,i.boundingBoxGizmoEnabled=!1):"r"===n.key?e._selectedMesh&&(i.boundingBoxGizmoEnabled=!0,i.positionGizmoEnabled=!1,i.rotationGizmoEnabled=!1,i.scaleGizmoEnabled=!1):"Escape"==n.key&&e.deselectAll()})),this._scene.onPointerObservable.add((function(n){var o;if(n.type===m.Zp.POINTERDOWN){var t=e._scene.pick(e._scene.pointerX,e._scene.pointerY);t.hit&&t.pickedPoint&&(e.cursorPosition.copyFrom(t.pickedPoint),e._cursor.position.copyFrom(e.cursorPosition),e._cursor.isVisible=!0)}else n.type===m.Zp.POINTERDOUBLETAP&&((null===(o=n.pickInfo)||void 0===o?void 0:o.hit)?(e._selectedMesh=n.pickInfo.pickedMesh,i.positionGizmoEnabled=!0,i.rotationGizmoEnabled=!1,i.scaleGizmoEnabled=!1,i.boundingBoxGizmoEnabled=!1,i.attachToMesh(e._selectedMesh)):e.deselectAll())}));var i=new u.u(this._scene);return i.gizmos.positionGizmo=new _.E,i.gizmos.rotationGizmo=new b.n,i.gizmos.scaleGizmo=new p.t,i.gizmos.boundingBoxGizmo=new z.c,i.positionGizmoEnabled=!1,i.rotationGizmoEnabled=!1,i.scaleGizmoEnabled=!1,i.boundingBoxGizmoEnabled=!1,i},e.prototype.deselectAll=function(){this._selectedMesh=null,this.gizmoManager.attachToMesh(null),this.gizmoManager.positionGizmoEnabled=!1,this.gizmoManager.rotationGizmoEnabled=!1,this.gizmoManager.scaleGizmoEnabled=!1,this.gizmoManager.boundingBoxGizmoEnabled=!1},e.prototype.addBox=function(e,i,n){var o=d.P.CreateBox("box",{size:1},this._scene);o.position=e,o.rotation=i,o.scaling=n,o.material=this._defaultMaterial},e.prototype.enableXR=function(){var e=this._scene.getMeshByName("floor");if(!e)throw new Error("Floor not found");this._scene.createDefaultXRExperienceAsync({floorMeshes:[e]})},e}()}}]);
//# sourceMappingURL=747.js.map