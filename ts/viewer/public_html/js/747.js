"use strict";(self.webpackChunkmonofy=self.webpackChunkmonofy||[]).push([[747],{5747:(e,i,n)=>{n.r(i),n.d(i,{Viewer:()=>E});var o=n(3582),t=n(7699),a=n(1513),s=n(9859),l=n(6041),d=n(2746),r=n(9923),c=n(5487),h=n(7698),m=n(6240),u=n(660),z=n(8844),b=n(9537),g=(n(6982),n(6547)),p=n(2285),_=window,E=function(){function e(e){var i=this;this._selectedMesh=null,this.cursorPosition=r.Pq.Zero(),void 0===e?(this._canvas=document.createElement("canvas"),document.body.appendChild(this._canvas)):this._canvas=e,this._canvas.width=_.innerWidth,this._canvas.height=_.innerHeight,_.addEventListener("resize",(function(){i._canvas.width=_.innerWidth,i._canvas.height=_.innerHeight})),this._engine=new t.N(this._canvas,!0),this._scene=new h.Z(this._engine),this._defaultMaterial=new s.F("defaultMaterial",this._scene),this._defaultMaterial.diffuseColor=new l.v9(.8,.8,.8),this._defaultMaterial.specularColor=new l.v9(0,0,0),this._camera=new o.L("camera",0,0,10,r.Pq.Zero(),this._scene),this._camera.attachControl(this._canvas,!0),new a.g("light",new r.Pq(0,1,0),this._scene).intensity=.7,new d.H("pointLight",new r.Pq(0,10,0),this._scene).intensity=.7,this.gizmoManager=this._createGizmos(),this.ground=this._createGround(),this._engine.runRenderLoop((function(){i._scene.render()}))}return Object.defineProperty(e.prototype,"domElement",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),e.prototype._createGround=function(e,i){void 0===e&&(e=10),void 0===i&&(i=10),this.ground&&this.ground.dispose();var n=c.P.CreateGround("ground",{width:e,height:i},this._scene);return n.material=this._defaultMaterial,n},e.prototype._createGizmos=function(){var e=this;if(this.gizmoManager)throw new Error("Gizmo manager already created");var i=null,n=0;_.addEventListener("keydown",(function(i){"Delete"===i.key?e._selectedMesh&&(o.attachToMesh(null),e._selectedMesh.dispose()):"e"===i.key?e._selectedMesh&&(o.rotationGizmoEnabled=!0,o.positionGizmoEnabled=!1,o.scaleGizmoEnabled=!1,o.boundingBoxGizmoEnabled=!1):"w"===i.key?e._selectedMesh&&(o.positionGizmoEnabled=!0,o.rotationGizmoEnabled=!1,o.scaleGizmoEnabled=!1,o.boundingBoxGizmoEnabled=!1):"q"===i.key?e._selectedMesh&&(o.positionGizmoEnabled=!0,o.rotationGizmoEnabled=!0,o.scaleGizmoEnabled=!1,o.boundingBoxGizmoEnabled=!1):"s"===i.key?e._selectedMesh&&(o.positionGizmoEnabled=!1,o.rotationGizmoEnabled=!1,o.scaleGizmoEnabled=!0,o.boundingBoxGizmoEnabled=!1):"r"===i.key?e._selectedMesh&&(o.boundingBoxGizmoEnabled=!0,o.positionGizmoEnabled=!1,o.rotationGizmoEnabled=!1,o.scaleGizmoEnabled=!1):"Escape"==i.key&&e.deselectAll()})),this._scene.onPointerObservable.add((function(t){var a,s,l;if(t.type===m.Zp.POINTERDOWN)n=(new Date).getTime(),(null===(a=t.pickInfo)||void 0===a?void 0:a.hit)&&(i=t.pickInfo.pickedMesh);else if(t.type===m.Zp.POINTERUP){if((new Date).getTime()-n>200)return;(null===(s=t.pickInfo)||void 0===s?void 0:s.hit)&&t.pickInfo.pickedMesh===i?(console.log(null===(l=t.pickInfo.pickedMesh)||void 0===l?void 0:l.name),e._selectedMesh=t.pickInfo.pickedMesh,o.positionGizmoEnabled=!0,o.rotationGizmoEnabled=!1,o.scaleGizmoEnabled=!1,o.boundingBoxGizmoEnabled=!1,o.attachToMesh(e._selectedMesh)):e.deselectAll()}}));var o=new u.u(this._scene);return o.gizmos.positionGizmo=new z.E,o.gizmos.rotationGizmo=new b.n,o.gizmos.scaleGizmo=new g.t,o.gizmos.boundingBoxGizmo=new p.c,o.positionGizmoEnabled=!1,o.rotationGizmoEnabled=!1,o.scaleGizmoEnabled=!1,o.boundingBoxGizmoEnabled=!1,o},e.prototype.deselectAll=function(){this._selectedMesh=null,this.gizmoManager.attachToMesh(null),this.gizmoManager.positionGizmoEnabled=!1,this.gizmoManager.rotationGizmoEnabled=!1,this.gizmoManager.scaleGizmoEnabled=!1,this.gizmoManager.boundingBoxGizmoEnabled=!1},e.prototype.addBox=function(e,i,n){var o=c.P.CreateBox("box",{size:1},this._scene);o.position=e,o.rotation=i,o.scaling=n,o.material=this._defaultMaterial},e.prototype.enableXR=function(){var e=this._scene.getMeshByName("floor");if(!e)throw new Error("Floor not found");this._scene.createDefaultXRExperienceAsync({floorMeshes:[e]})},e}()}}]);
//# sourceMappingURL=747.js.map